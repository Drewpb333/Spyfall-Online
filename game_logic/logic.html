<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
        crossorigin="anonymous"></script>
</head>

<body>
    <div id="display-users"></div>
    <br>
    <br>
    <div id="round-number" style="font-size: 28px; font-weight: bold"></div>
    <br>
    <br>
    <div id="display-location"></div>
    <br>
    <br>
    <br>
    <div id="chat-box" style="border: 1px solid black; height: 200px"></div>
    <br>
    <br>
    <br>
    <form>
        <label for="user-input">Enter your name and click submit to begin game.</label>
        <input type="text" id="user-input">
        <input id="submit-button" type="submit" value="submit">
    </form>
    <script>
        $(document).ready(function () {
            var locations = ["Beach", "Casino", "Circus Tent", "Bank", "Day Spa", "Hotel",
                "Supermarket", "Hospital", "Military Base", "Police Station", "University",
                "Airplane", "Submarine", "Cathedral", "Corporate Party", "Movie Studio",
                "Crusader Army", "Pirate Ship", "Polar Station", "Space Station"
            ];
            var selectedLocation;
            var currentQuestioner;
            var round = 0;
            var playerLimit = 8;
            var users = []; //Users only created for demo purposes
            var userRoles = {};
            var questioner;
            var questionSubmitted;
            var displayUsers = $("#display-users");
            var displayLocations = $("#display-location");
            var roundNumber = $("#round-number");
            var chatBox = $("#chat-box");
            var userInput = $("#user-input");
            var userInputButton = $("#submit-button");

            function assignToLocalStorage(userName) {
                for (var i = 1; i <= playerLimit; i++) {
                    if (!localStorage.getItem(i)) {
                        localStorage.setItem(i, userName);
                        users.push(userName);
                        console.log(localStorage.getItem(i));
                        break;
                    }
                }
                roundNumber.text("Sorry, all spots are taken.")
            }

            //this will be modified later
            userInputButton.on("click", function () {
                event.preventDefault();
                $("label[for='user-input']").text("Type question or response here");
                var userName = userInput.val().trim();
                assignToLocalStorage(userName);
                startGame();
            })

            function spySelector() {
                var spy = users[Math.floor(Math.random() * users.length)];
                userRoles[spy] = "Spy";
                users.forEach(function (user) {
                    if (user != spy) {
                        userRoles[user] = "Good guy";
                    }
                })
                // selects first questioner
                var questionerSelector = users[Math.floor(Math.random() * users.length)];
                questioner = userRoles[questionerSelector];
            }

            function roundTracker() {
                if (round < 6) {
                    suddenDecision();
                }
                round++;
                roundNumber.text("Round: " + round);
            }

            //allows selected user to direct questions at another individual
            function userQuestions() {
                // loops for one round
                for (var i = 1; i < users.length; i++) {
                    // put if statement here for user current questioner
                    userInputButton.on("click", function () {
                        chatBox.append(userInput.val().trim());

                        questionSubmitted = true;
                        // put if statement questionSubmitted = true and user input is from responder
                        if (questionSubmitted) {
                            userInputButton.on("click", function () {
                                chatBox.append(userInput.val().trim());

                                questionSubmitted = false;
                            })
                        };
                    });
                }
            }

            function displayUsersAndLocation() {
                users.forEach(function (name) {
                    displayUsers.append("<button>" + name + "</button>");
                });
                locations.forEach(function (loc) {
                    displayLocations.append("<button>" + loc + "</button>");
                })
            }

            // "Good Guys" must guess who should the spy is.  "Spy" must guess the location
            function suddenDecision() {
                console.log(suddenDecision);
            }








            function startGame() {
                selectedLocation = Math.round(Math.random() * locations.length);
                spySelector();
                roundTracker();
                displayUsersAndLocation();
            }

            function restartGame() {
                userRoles = {};
                users = [];
                round = 0;
            }
        });
    </script>
</body>

</html>