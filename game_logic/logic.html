<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
        crossorigin="anonymous"></script>
</head>

<body>
    <div id="display-users"></div>
    <br>
    <br>
    <div id="round-number" style="font-size: 28px; font-weight: bold"></div>
    <br>
    <br>
    <div id="display-location"></div>
    <br>
    <br>
    <br>
    <div id="chat-box" style="border: 1px solid black; height: 200px"></div>
    <br>
    <br>
    <br>
    <form>
        <label for="number-of-users">Click submit to begin game.</label>
        <input type="text" id="number-of-users">
        <input id="submit-button" type="submit" value="submit">
    </form>
    <script>
        $(document).ready(function () {
            var locations = ["Beach", "Broadway Theater", "Casino", "Circus Tent", "Bank",
                "Day Spa", "Hotel", "Restaurant", "Supermarket", "Hospital",
                "Embassy", "Military Base", "Police Station", "University", "Airplane",
                "Ocean Liner", "Passenger Train", "Submarine", "Cathedral", "Corporate Party",
                "Movie Studio", "Crusader Army", "Pirate Ship", "Polar Station", "Space Station"
            ];
            var selectedLocation;
            var currentQuestioner;
            var round = 0;
            var playerLimit = 5;
            var users = ["Joe", "Emily", "Michelle", "John", "Burt"]; //Users only created for demo purposes
            var userRoles = {};
            var questioner;
            var questionSubmitted;
            var displayUsers = $("#display-users");
            var displayLocations = $("#display-location");
            var roundNumber = $("#round-number");
            var chatBox = $("#chat-box");
            var userInput = $("#submit-button");

            //this will be modified later
            $("#submit-button").on("click", function () {
                event.preventDefault();
                $("label[for='number-of-users']").text("Type question or response here");
                startGame();
            })

            function spySelector() {
                var spy = users[Math.floor(Math.random() * users.length)];
                userRoles[spy] = "Spy";
                users.forEach(function (user) {
                    if (user != spy) {
                        userRoles[user] = "Good guy";
                    }
                })
                // selects first questioner
                var questionerSelector = users[Math.floor(Math.random() * users.length)];
                questioner = userRoles[questionerSelector];
            }

            function roundTracker() {
                if (round < 6) {
                    suddenDecision();
                }
                round++;
                roundNumber.text("Round: " + round);
            }

            //allows selected user to direct questions at another individual
            function userQuestions() {
                // loops for one round
                for (var i = 1; i < 6; i++){
                    // put if statement here for user current questioner
                    userInput.on("click", function() {
                        chatBox.append(userInput.val().trim());
                        
                        questionSubmitted = true;
                    });
                    // put if statement questionSubmitted = true and user input is from responder
                    userInput.on("click", function(){
                        chatBox.append(userInput.val().trim());

                        questionSubmitted = false;
                    });
                }
            }

            function restartGame() {
                startGame = false;
                userRoles = {};
                users = [];
            }

            function displayUsersAndLocation() {
                users.forEach(function (userName) {
                    displayUsers.append("<button>" + userName + "</button>");
                });
                locations.forEach(function (loc) {
                    displayLocations.append("<button>" + loc + "</button>");
                })
            }

            // "Good Guys" must guess who should the spy is.  "Spy" must guess the location
            function suddenDecision() {
                console.log(suddenDecision);
            }





            function startGame() {
                selectedLocation = Math.round(Math.random() * locations.length);
                spySelector();
                roundTracker();
                displayUsersAndLocation();
            }

            function restartGame() {
                userRoles = {};
                users = [];
                round = 0;
            }
        });
    </script>
</body>

</html>